var path = require('path');

var PathManager = new (function() {
	var self = this;
	var _frameworkDirPath = null;
	var _appDirPath = null;
	var _frameworkURLRegex = null;
	
	self.init = function(frameworkURL, frameworkDirPath, appDirPath) {
		_frameworkDirPath = frameworkDirPath;
		_appDirPath = appDirPath;
		_frameworkURLRegex = new RegExp('^' + frameworkURL);
	}
	
	self.getFrameworkPath = function() {
		return _frameworkDirPath;
	}
	
	self.getAppPath = function() {
		return _appDirPath;
	}
	
	self.urlToPath = function(url) {
		var filePath;
		if(_frameworkURLRegex.test(url)) {
			filePath = url.replace(_frameworkURLRegex, _frameworkDirPath + '/');
		} else {
			filePath = _appDirPath + '/' + url;
		}
		return path.normalize(filePath);
	}
})();

module.exports = PathManager;